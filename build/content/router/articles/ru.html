<h1>Роутер</h1>

<h2>Как установить?</h2>

{{ install }}

<h2>Пример</h2>

{{ match-routes }}

<h2>Описание</h2>

<p>
  Набор утилит для организации маршрутиризации.
</p>

<h2>route(matchers|path, action, props = {}, childs = [])</h2>

<p>
  <b>matchers|path</b> - массив состоящий из строк путей и объектов совпадений | или одна строка пути
  <ul>
    <li>
      <i>path</i> - строка пути
      <br>Примеры:
      <ul>
        <li>'*' - любое значение</li>
        <li>'/:id' - именованное любое значение будет передано в request.params как { id: [value] }</li>
        <li>'/segment' - ищет точное вхождение сегмента </li>
      </ul>
    </li>
    <li>
      <i>matcher</i> - объект совпадения
      <ul>
        <li>
          <i>key</i> - название сегмента совпадения
        </li>
        <li>
          <i>match</i> - функция обратного вызова, в качестве аргумента принимает значение <i>key</i>.
          Должна вернуть true в случае совпадения| false в случае не совпадения.
        </li>
      </ul>

      Пример объекта совпадения:

      {{ matcher }}

    </li>
  </ul>
  <b>action</b> - функция обработчик или строка в формате 'Контроллер#действие'
  <br>
  Например для контроллера PostsController и метода show, строка пути будет 'Posts#show'
  <br>
  <b>props</b> - объект параметров
  <br>
  <b>childs</b> - массив вложенных маршрутов
  <br>
</p>

<p>Возвращает объект роута:</p>

<ul>
  <li>
    <b>segments</b> - массив сегментов строки пути
  </li>
  <li>
    <b>path</b> - строка пути
  </li>
  <li>
    <b>action</b> - функция обработки запроса
  </li>
  <li>
    <b>props</b> - объект параметров запроса
  </li>
  <li>
    <b>childs</b> - массив вложенных маршрутов
  </li>
</ul>

<h2>initRoutes({ routes, controllers })</h2>
  <ul>
    <li>Назначает маршрутам метод в соответсвующем контроллере</li>
    <li>Индексирует роуты</li>
    <li>Выравнивает все маршруты на один уровень вложенности</li>
    <li>Подготавливает сегменты к корректному поиску</li>
  </ul>
<p>

</p>

<p>
  <b>routes</b> - массив маршрутов
  <br>
  <b>controller</b> - объект контроллеров
  <br>
</p>

<p>Возвращает массив маршрутов.</p>


<h2>matchRoutes(routes, path)</h2>

<p>
  Находит первый попавшийся маршрут на основе заданного пути и добавляет к нему объект request.
</p>

<p>
  <b>routes</b> - массив маршрутов
  <br>
  <b>path</b> - строка пути
  <br>
</p>

<p>
  Возвращает объект <b>routeInfo</b>:
  <ul>
    <li>
      <b>path</b> - строка пути
    </li>
    <li>
      <b>segments</b> - массив элементов пути
    </li>
    <li>
      <b>action</b> - функция обработчика маршрута
    </li>
    <li>
      <b>props</b> - объект параметров маршрута
    </li>
    <li>
      <b>childs</b> - массив вложенных маршрутов
    </li>
    <li>
      <b>request</b> - объект запроса
      <ul>
        <li>
          <b>path</b> - строка пути
        </li>
        <li>
          <b>segments</b> - массив элементов пути
        </li>
        <li>
          <b>params</b> - объект параметров маршрута
        </li>
      </ul>
    </li>
  </ul>
</p>
