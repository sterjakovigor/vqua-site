<h1>Роутер</h1>

<h2>Как установить?</h2>

{{ install }}

<h2>Пример</h2>

{{ match-routes }}

<h2>Описание</h2>

<p>
  Набор утилит для организации маршрутиризации.
</p>

<br>

<h2>route [Function]</h2>

<p>Создает объект роута.</p>

<br>

<p>Аргументы:<p>

<p>
  <b>matcher|matchers</b> matcher [Object] | [Array]: matcher [Object] - объект(ы) совпадения
  <br>
  <b>action</b> [Function] - функция обработчик или строка в формате 'Контроллер#действие'
  <br>
  Например для контроллера PostsController и метода show, строка пути будет 'Posts#show'
  <br>
  <b>props</b> [Object] - объект параметров
  <br>
  <b>childs</b> [Array] - массив вложенных маршрутов
  <br>
</p>

<br>

<p>
  Возвращает:
</p>

<br>

<p>
  route [Object]
</p>

<br>

<h2>scope [Function]</h2>

<p>Назначает всем детям первого уровня свои сегменты.</p>

<br>

<p>Аргументы:<p>

<p>
  <b>matcher|matchers</b> matcher [Object] | [Array]: matcher [Object] - объект(ы) совпадения
  <br>
  <b>childs</b> [Array] - массив вложенных маршрутов
</p>

<br>

<p>Возвращает:<p>

<p>[Array]: route [Object]</p>

<br>

<h2>initRoutes [Function]</h2>

<ul>
  <li>Назначает маршрутам метод в соответсвующем контроллере</li>
  <li>Заменяет строковые сегменты маршрута начинающейся с "!" на объекты сопадения</li>
  <li>Индексирует роуты</li>
  <li>Выравнивает все маршруты на один уровень вложенности</li>
  <li>Подготавливает сегменты к корректному поиску</li>
</ul>

<br>

<p>Аргументы:</p>

<br>

<p>
  <b>routes</b> [Array] - массив маршрутов
  <br>
  <b>controller</b> [Object] - объект контроллеров.
  Где ключи это название контроллеров.
  <br>
  <b>matchers</b> [Object] - объект совпадений.
  Где ключи это название объектов совпадения.
  <br>
</p>

<br>

<p>Возвращает:</p>

<br>

<p>[Array]: route[Object]</p>

<br>

<h2>matchRoutes [Function]</h2>

<p>
  Находит первый попавшийся маршрут на основе заданного пути и добавляет
  к нему объект request.
</p>

<br>

<p>Аргументы:</p>

<br>

<p>
  <b>routes</b> [Array] - массив маршрутов
  <br>
  <b>path</b> [String] - строка пути
  <br>
</p>

<br>

<p>Возвращает:</p>

<br>

<p>
  [Object]: route[Object] & request[Object]
</p>

<br>

<hr>

<br>

<h2>route [Object]</h2>

<p>
  Объект роута.
</p>

<br>

<p>Ключи:<p>

<p>
  <b>segments</b> [Array] - массив сегментов строки пути
  <br>
  <b>path</b> [String] - строка пути
  <br>
  <b>action</b> [Function] - функция обработки запроса
  <br>
  <b>props</b> [Object] - объект параметров запроса
  <br>
  <b>childs</b> [Array] - массив вложенных маршрутов
</p>


<br>


<h2>request [Object]</h2>

<p>Объект запроса.</p>

<br>

<p>Ключи:</p>

<br>

<p>
  <b>path</b> [String] - строка пути
  <br>
  <b>segments</b> [Array] - массив элементов пути
  <br>
  <b>params</b> [Object] - объект параметров маршрута
</p>



<br>

<h2>matcher [Object]</h2>

<p>Объект совпадения.</p>

<br>

<p>Ключи:<p>

<p>
  <b>key</b> [String] - название сегмента совпадения
  <br>
  <b>match</b> [Function] - функция обратного вызова
</p>

<br>

<p>
Пример:

{{ matcher }}
</p>

<br>

<h3>matcher.match [Function]</h3>

<p>
  Определяет является ли значение сегмента url валидным.
</p>

<br>

<p>Аргументы:</p>

<p><b>value</b> [String] - значение сегмента url</p>

<br>

<p>Возвращает:</p>

<br>

<p>[Boolean]</p>

<br>

<h2>matcher [String]</h2>

<p>
  Строка совпадения
</p>

<br>

<p>Примеры:</p>

<ul>
  <li>'*' - любое значение</li>
  <li>'/:id' - именованное любое значение будет передано в request.params как { id: [value] }</li>
  <li>'/!matcher' - название объекта совпадения</li>
  <li>'/segment' - ищет точное вхождение сегмента </li>
</ul>
